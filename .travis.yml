sudo: true
language: cpp

os:
  - linux

notifications:
  email: false

addons:
  apt:
    packages:
      - bison
      - build-essential
      - curl
      - dos2unix
      - flex
      - git
      - make
      - mingw-w64
      - pbzip2
      - python
      - texinfo
      - zip

before_install:
  - df -h
  - cat /proc/mounts
  - curl https://storage.googleapis.com/git-repo-downloads/repo > ~/bin/repo
  - chmod a+x ~/bin/repo
  - mkdir ~/my-android-git
  - cd ~/my-android-git
  - repo init --depth 1 -u https://android.googlesource.com/platform/manifest -b ndk-r16 -q
  - repo sync -j16 -c --no-clone-bundle --no-tags

install:
  - df -h
  - cd ~/my-android-git
  - find -depth -type d -name .git -exec rm -rf {} \;
  - rm -rf ./.repo
  - df -h
  - du -had3
  - find -maxdepth 2
  - ls -la
  - mkdir outdir
  - cd outdir
  - python ../ndk/checkbuild.py --no-build-tests --no-package --host-only

script:
  - cd outdir
  - find

after_success:
  - echo hahaha
